

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Application Modules &mdash; Distributed Multi Agent LLMs 0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=2709fde1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Distributed Multi Agent LLMs documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Distributed Multi Agent LLMs
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Application Modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#server-module">server module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-client">client module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#client.create_env_template"><code class="docutils literal notranslate"><span class="pre">create_env_template()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#client.create_gradio_interface"><code class="docutils literal notranslate"><span class="pre">create_gradio_interface()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#client.fill_query_and_type"><code class="docutils literal notranslate"><span class="pre">fill_query_and_type()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#client.get_example_choices"><code class="docutils literal notranslate"><span class="pre">get_example_choices()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#client.init_client"><code class="docutils literal notranslate"><span class="pre">init_client()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#client.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#client.process_query"><code class="docutils literal notranslate"><span class="pre">process_query()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#client.update_aggregator"><code class="docutils literal notranslate"><span class="pre">update_aggregator()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#client.update_output_labels"><code class="docutils literal notranslate"><span class="pre">update_output_labels()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-database_manager">database_manager module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#database_manager.DatabaseManager"><code class="docutils literal notranslate"><span class="pre">DatabaseManager</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.create_user"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.create_user()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.delete_interaction"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.delete_interaction()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.delete_user"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.delete_user()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.get_interaction"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.get_interaction()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.get_interaction_history"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.get_interaction_history()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.get_user_history"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.get_user_history()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.initialize_db"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.initialize_db()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.save_analysis"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.save_analysis()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.save_interaction"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.save_interaction()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.save_responses"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.save_responses()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#database_manager.DatabaseManager.verify_user"><code class="docutils literal notranslate"><span class="pre">DatabaseManager.verify_user()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-load_balancer">load_balancer module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load_balancer.consistent_hash"><code class="docutils literal notranslate"><span class="pre">consistent_hash()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#load_balancer.proxy"><code class="docutils literal notranslate"><span class="pre">proxy()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Distributed Multi Agent LLMs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Application Modules</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/modules.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="application-modules">
<h1>Application Modules<a class="headerlink" href="#application-modules" title="Link to this heading"></a></h1>
<p>This section provides documentation for each Python module in the Distributed Multi Agent LLMs application.</p>
<section id="server-module">
<h2>server module<a class="headerlink" href="#server-module" title="Link to this heading"></a></h2>
</section>
<section id="module-client">
<span id="client-module"></span><h2>client module<a class="headerlink" href="#module-client" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="client.create_env_template">
<span class="sig-prename descclassname"><span class="pre">client.</span></span><span class="sig-name descname"><span class="pre">create_env_template</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#create_env_template"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#client.create_env_template" title="Link to this definition"></a></dt>
<dd><p>Creates a <cite>.env</cite> file in the current working directory if it does not already exist.</p>
<p>The <cite>.env</cite> file contains default configuration settings for the OpenRouter API, 
including placeholders for the API key and backend URL.</p>
<p>Contents of the generated <cite>.env</cite> file:
- OPENROUTER_API_KEY: Placeholder for the OpenRouter API key.
- BACKEND_URL: Default backend URL set to <cite>http://localhost:8000</cite>.</p>
<p>This function ensures that the required environment configuration file is present 
for the application to function correctly.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="client.create_gradio_interface">
<span class="sig-prename descclassname"><span class="pre">client.</span></span><span class="sig-name descname"><span class="pre">create_gradio_interface</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#create_gradio_interface"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#client.create_gradio_interface" title="Link to this definition"></a></dt>
<dd><p>Creates a Gradio interface for a Distributed Multi-Agent LLM System.
This function initializes the Gradio application with multiple interactive components,
including login/signup functionality, query submission, model response display, 
analysis visualizations, and interaction history management. It also handles user 
authentication, session management, and backend communication for processing queries 
and retrieving historical data.</p>
<dl class="simple">
<dt>Returns:</dt><dd><p>gr.Blocks: The Gradio Blocks application instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="client.fill_query_and_type">
<span class="sig-prename descclassname"><span class="pre">client.</span></span><span class="sig-name descname"><span class="pre">fill_query_and_type</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selected_example</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#fill_query_and_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#client.fill_query_and_type" title="Link to this definition"></a></dt>
<dd><p>Sends a POST request to the backend to fill in a query and determine the question type
based on the provided example and domain.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>selected_example (str): The selected example to be processed.
domain (str): The domain context for the query.</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>tuple: A tuple containing:</dt><dd><ul class="simple">
<li><p>query (str): The filled query string. Returns an empty string if an error occurs.</p></li>
<li><p>question_type (str): The type of the question. Defaults to “None” if not determined.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="client.get_example_choices">
<span class="sig-prename descclassname"><span class="pre">client.</span></span><span class="sig-name descname"><span class="pre">get_example_choices</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">domain</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#get_example_choices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#client.get_example_choices" title="Link to this definition"></a></dt>
<dd><p>Fetches example choices for a given domain from a backend service.</p>
<dl class="simple">
<dt>Args:</dt><dd><dl class="simple">
<dt>domain (str): The domain for which to fetch example choices. </dt><dd><p>If the domain is None or empty, an empty list of choices is returned.</p>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>gr.update: An object containing the updated choices and value. </dt><dd><ul class="simple">
<li><p>If successful, the choices are populated with examples fetched from the backend.</p></li>
<li><p>If the request fails or an error occurs, the choices are empty.</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><p>Logs errors if the backend request fails or an exception occurs during execution.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="client.init_client">
<span class="sig-prename descclassname"><span class="pre">client.</span></span><span class="sig-name descname"><span class="pre">init_client</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">retries</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1.5</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/client.html#init_client"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#client.init_client" title="Link to this definition"></a></dt>
<dd><p>Initializes the client by attempting to connect to the backend and fetching necessary data.</p>
<p>This function tries to establish a connection to the backend server and retrieve information
such as model details, domains, question types, and examples. It retries the connection
a specified number of times with a delay between attempts if the connection fails.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>retries (int): The maximum number of connection attempts. Defaults to 3.
delay (float): The delay (in seconds) between consecutive connection attempts. Defaults to 1.5.</p>
</dd>
<dt>Returns:</dt><dd><p>bool: True if the connection and data retrieval are successful, False otherwise.</p>
</dd>
<dt>Raises:</dt><dd><p>None: All exceptions are caught and logged, and the function will return False
if the connection fails after the specified number of retries.</p>
</dd>
<dt>Global Variables:</dt><dd><p>model_info (dict): Stores information about models retrieved from the backend.
domains (dict): Stores domain data retrieved from the backend.
question_types (list): Stores question types retrieved from the backend.
examples_by_domain (dict): Stores examples categorized by domain retrieved from the backend.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="client.main">
<span class="sig-prename descclassname"><span class="pre">client.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#client.main" title="Link to this definition"></a></dt>
<dd><p>The main function for the Multi-Agent LLM Client application. This function
parses command-line arguments, updates the backend URL, creates a .env 
template, and launches a Gradio interface.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="client.process_query">
<span class="sig-prename descclassname"><span class="pre">client.</span></span><span class="sig-name descname"><span class="pre">process_query</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">question_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregator_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ethical_views</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">progress=&lt;gradio.helpers.Progress</span> <span class="pre">object&gt;</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#process_query"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#client.process_query" title="Link to this definition"></a></dt>
<dd><p>Processes a user query by sending it to a backend service, polling for the job status, 
and retrieving the results, including responses from models, analysis, and visualizations.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>query (str): The user query to be processed.
api_key (str): The API key for authentication with the backend.
question_type (str): The type of question being asked.
domain (str): The domain or context of the query.
aggregator_id (str): The ID of the aggregator model to be used.
session (str): The session or username for tracking the request.
progress (gr.Progress, optional): A progress tracker for updating the UI.</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>list: Contains:</dt><dd><ul class="simple">
<li><p>str: Aggregator model response or error message.</p></li>
<li><p>str: Responses from up to three non-aggregator models.</p></li>
<li><p>float: Consensus score.</p></li>
<li><p>Image or None: Visualizations (heatmap, emotion, polarity, radar).</p></li>
<li><p>gr.update: Updates for warnings and model labels.</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><p>Exception: For errors during query processing, including network or backend issues.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="client.update_aggregator">
<span class="sig-prename descclassname"><span class="pre">client.</span></span><span class="sig-name descname"><span class="pre">update_aggregator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aggregator_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#update_aggregator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#client.update_aggregator" title="Link to this definition"></a></dt>
<dd><p>Updates the aggregator model on the backend server.</p>
<p>This function sends a POST request to the backend server to update the 
aggregator model identified by the given <cite>aggregator_id</cite>. If the request 
is successful, the updated aggregator ID is returned. Otherwise, an error 
is logged, and <cite>None</cite> is returned.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>aggregator_id (str): The unique identifier of the aggregator to update.</p>
</dd>
<dt>Returns:</dt><dd><p>str or None: The updated aggregator ID if the request is successful, 
or <cite>None</cite> if the request fails or an exception occurs.</p>
</dd>
<dt>Raises:</dt><dd><p>None: Any exceptions are caught and logged.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="client.update_output_labels">
<span class="sig-prename descclassname"><span class="pre">client.</span></span><span class="sig-name descname"><span class="pre">update_output_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aggregator_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#update_output_labels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#client.update_output_labels" title="Link to this definition"></a></dt>
<dd><p>Updates the output labels for the aggregator and agent models based on the 
provided aggregator ID and the model information retrieved from the backend.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>aggregator_id (str): The ID of the aggregator whose labels need to be updated.</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>dict: A dictionary containing updated labels for the aggregator and up to </dt><dd><p>three agent models. The keys correspond to the output components 
(e.g., <cite>output_aggregator</cite>, <cite>output_model1</cite>, <cite>output_model2</cite>, <cite>output_model3</cite>), 
and the values are <cite>gr.update</cite> objects with the new labels.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-database_manager">
<span id="database-manager-module"></span><h2>database_manager module<a class="headerlink" href="#module-database_manager" title="Link to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="database_manager.DatabaseManager">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">database_manager.</span></span><span class="sig-name descname"><span class="pre">DatabaseManager</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">db_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'/home/runner/work/Distributed-Multi-Agents/Distributed-Multi-Agents/src/../agent_history.db'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager" title="Link to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>DatabaseManager is a class responsible for managing interactions with an SQLite database.
It provides methods to initialize the database, store and retrieve data related to user interactions,
responses, and analysis, as well as manage user accounts.</p>
<dl class="simple">
<dt>Attributes:</dt><dd><p>db_path (str): The file path to the SQLite database.</p>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.create_user">
<span class="sig-name descname"><span class="pre">create_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.create_user"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.create_user" title="Link to this definition"></a></dt>
<dd><p>Creates a new user in the database with the given username and password.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>username (str): The username of the new user.
password (str): The plaintext password of the new user.</p>
</dd>
<dt>Returns:</dt><dd><p>bool: True if the user was successfully created.
str: “duplicate” if the username already exists in the database.
str: “error” if an unexpected error occurs during user creation.</p>
</dd>
<dt>Raises:</dt><dd><p>None: All exceptions are handled internally and logged.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.delete_interaction">
<span class="sig-name descname"><span class="pre">delete_interaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.delete_interaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.delete_interaction" title="Link to this definition"></a></dt>
<dd><p>Deletes an interaction and its associated data from the database.
This method removes entries from the <cite>responses</cite>, <cite>analysis</cite>, and <cite>interactions</cite>
tables in the database for a given job ID, provided the specified username
matches the owner of the interaction.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>job_id (str): The unique identifier of the job to be deleted.
username (str): The username of the user attempting to delete the interaction.</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>bool: True if the interaction and associated data were successfully deleted,</dt><dd><p>False if the username does not match the owner or an error occurs.</p>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><p>None: Any exceptions encountered are logged and handled internally.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.delete_user">
<span class="sig-name descname"><span class="pre">delete_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.delete_user"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.delete_user" title="Link to this definition"></a></dt>
<dd><p>Deletes a user from the database if the provided username and password match.
The password is hashed using SHA-256.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>username (str): The username of the user to be deleted.
password (str): The plaintext password of the user to be deleted.</p>
</dd>
<dt>Returns:</dt><dd><p>bool: True if the user was successfully deleted, False otherwise.</p>
</dd>
<dt>Raises:</dt><dd><p>Exception: Logs an error if an exception occurs during the deletion process.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.get_interaction">
<span class="sig-name descname"><span class="pre">get_interaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.get_interaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.get_interaction" title="Link to this definition"></a></dt>
<dd><p>Retrieves interaction details from the database for a given job ID.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>job_id (str): The unique identifier for the job whose interaction details are to be retrieved.</p>
</dd>
<dt>Returns:</dt><dd><p>Optional[Dict[str, Any]]: A dictionary containing the interaction details if found, or None if no interaction
exists for the given job ID.</p>
</dd>
<dt>Raises:</dt><dd><p>Logs an error and returns None if an exception occurs during database operations.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.get_interaction_history">
<span class="sig-name descname"><span class="pre">get_interaction_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.get_interaction_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.get_interaction_history" title="Link to this definition"></a></dt>
<dd><p>Retrieves the interaction history from the database, including associated responses.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>limit (int): The maximum number of interactions to retrieve. Defaults to 50.</p>
</dd>
<dt>Returns:</dt><dd><p>List[Dict[str, Any]]: A list of dictionaries, where each dictionary represents an interaction.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.get_user_history">
<span class="sig-name descname"><span class="pre">get_user_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">limit</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.get_user_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.get_user_history" title="Link to this definition"></a></dt>
<dd><p>Retrieves the interaction history of a specific user from the database.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>username (str): The username of the user whose history is to be retrieved.
limit (int, optional): The maximum number of interactions to retrieve. Defaults to 50.</p>
</dd>
<dt>Returns:</dt><dd><p>List[Dict[str, Any]]: A list of dictionaries, where each dictionary represents an interaction.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.initialize_db">
<span class="sig-name descname"><span class="pre">initialize_db</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.initialize_db"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.initialize_db" title="Link to this definition"></a></dt>
<dd><p>Initializes the database by creating necessary tables if they do not already exist.
Tables created:
- interactions: Stores interaction details such as job ID, query, domain, question type, timestamp, username, and roles.
- responses: Stores agent responses linked to interactions, including job ID, agent ID, response text, aggregator status, and timestamp.
- analysis: Stores analysis data for interactions, including consensus score, analysis data, and timestamp.
- users: Stores user credentials with unique usernames and passwords.
Logs a success message upon successful initialization or an error message if an exception occurs.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.save_analysis">
<span class="sig-name descname"><span class="pre">save_analysis</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">consensus_score</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">analysis_data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.save_analysis"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.save_analysis" title="Link to this definition"></a></dt>
<dd><p>Saves the analysis data for a specific job into the database.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>job_id (str): The unique identifier for the job.
consensus_score (float): The consensus score associated with the analysis.
analysis_data (Dict[str, Any]): A dictionary containing the analysis data to be saved.</p>
</dd>
<dt>Returns:</dt><dd><p>bool: True if the analysis data was successfully saved, False otherwise.</p>
</dd>
<dt>Raises:</dt><dd><p>Exception: Logs any exception that occurs during the database operation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.save_interaction">
<span class="sig-name descname"><span class="pre">save_interaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">domain</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">question_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.save_interaction"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.save_interaction" title="Link to this definition"></a></dt>
<dd><p>Saves an interaction record to the database.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>job_id (str): The unique identifier for the job associated with the interaction.
query (str): The query or input provided by the user.
domain (str): The domain or category of the interaction.
question_type (str): The type of question being asked.
username (str): The username of the individual initiating the interaction.
roles (Optional[str]): Additional roles or metadata associated with the interaction. Defaults to an empty string.</p>
</dd>
<dt>Returns:</dt><dd><p>bool: True if the interaction was successfully saved, False otherwise.</p>
</dd>
<dt>Raises:</dt><dd><p>Logs an error message if an exception occurs during the database operation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.save_responses">
<span class="sig-name descname"><span class="pre">save_responses</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">responses</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aggregator_id</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.save_responses"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.save_responses" title="Link to this definition"></a></dt>
<dd><p>Saves agent responses to the database for a specific job.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>job_id (str): The unique identifier for the job.
responses (Dict[str, str]): A dictionary mapping agent IDs to their responses.
aggregator_id (Optional[str]): The ID of the aggregator agent, if any. Defaults to None.</p>
</dd>
<dt>Returns:</dt><dd><p>bool: True if the responses were successfully saved, False otherwise.</p>
</dd>
<dt>Raises:</dt><dd><p>Exception: Logs an error message if an exception occurs during the database operation.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="database_manager.DatabaseManager.verify_user">
<span class="sig-name descname"><span class="pre">verify_user</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">username</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">password</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">bool</span></span></span><a class="reference internal" href="_modules/database_manager.html#DatabaseManager.verify_user"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#database_manager.DatabaseManager.verify_user" title="Link to this definition"></a></dt>
<dd><p>Verifies the credentials of a user by checking the provided username and password
against the stored records in the database.</p>
<dl class="simple">
<dt>Args:</dt><dd><p>username (str): The username of the user to verify.
password (str): The plaintext password of the user to verify.</p>
</dd>
<dt>Returns:</dt><dd><dl class="simple">
<dt>bool: True if the username and hashed password match a record in the database,</dt><dd><p>False otherwise.</p>
</dd>
</dl>
</dd>
<dt>Raises:</dt><dd><p>Exception: Logs an error message if an exception occurs during the verification process.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-load_balancer">
<span id="load-balancer-module"></span><h2>load_balancer module<a class="headerlink" href="#module-load_balancer" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="load_balancer.consistent_hash">
<span class="sig-prename descclassname"><span class="pre">load_balancer.</span></span><span class="sig-name descname"><span class="pre">consistent_hash</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">job_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/load_balancer.html#consistent_hash"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#load_balancer.consistent_hash" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="load_balancer.proxy">
<em class="property"><span class="k"><span class="pre">async</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">load_balancer.</span></span><span class="sig-name descname"><span class="pre">proxy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Request</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/load_balancer.html#proxy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#load_balancer.proxy" title="Link to this definition"></a></dt>
<dd><p>Smart proxy:
- Sticky routing for job_id-specific paths (status/result/image)
- Round-robin with retry logic for everything else (2-fault tolerant)</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Distributed Multi Agent LLMs documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Manasvi Goyal and Sukanya Krishna.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>